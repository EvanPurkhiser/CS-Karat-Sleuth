#!/usr/bin/env ruby

# Handle passing in argv to either the learning part of the program or the
# checker part of the program. It's probably a good idea to let the first
# argument be the sub-command ('learn','check').

require 'mail'

# Determine whether to use data as testing or training set
dataType = ARGV[0]
if (dataType != "learn" && dataType != "check")
	puts "Invalid command. Usages:"
	puts "  karatsleuth learn <data-directory>"
	puts "  karatsleuth check <data-directory>"
	exit
end

# Get directory for data and verify its existence
dataDir = ARGV[1]
if !File.directory?(dataDir)
	puts dataDir + ": No such directory."
	exit
end

if (dataType == "learn")
	# This should probably be in the library instead
	# Read in each item within the directory
	Dir.foreach(dataDir) do |item|
		next if item == '.' or item == '..'
		data = "#{dataDir}/#{item}"
		mail = Mail.read(data)
		# Use contents of mail to add into knowledge base
	end
end
